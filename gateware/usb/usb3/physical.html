

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Physical &mdash; SOL 0.2.1.dev14 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/styles.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/styles.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/platformpicker.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/styles.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://sol.shmdn.link/gateware/usb/usb3/physical.html" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/platformpicker.js"></script>
        <script src="../../../_static/wavedrom.skin.js"></script>
        <script src="../../../_static/wavedrom.min.js"></script>
        <script src="../../../_static/js/wavedrom.min.js"></script>
        <script src="../../../_static/js/wavedrom.skin.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Protocol" href="protocol.html" />
    <link rel="prev" title="Link" href="link.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> SOL
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../features.html">Status &amp; Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#support-for-device-mode">Support for Device Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#support-for-host-mode">Support for Host Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-yosys">Installing Yosys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-torii">Installing Torii</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-sol">Installing SOL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Gateware Library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../interface/index.html">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../interface/pipe.html">PIPE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../interface/pipe.html#sol_usb.gateware.interface.pipe.PIPEInterface"><code class="docutils literal notranslate"><span class="pre">PIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/pipe.html#sol_usb.gateware.interface.pipe.AsyncPIPEInterface"><code class="docutils literal notranslate"><span class="pre">AsyncPIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/pipe.html#sol_usb.gateware.interface.pipe.GearedPIPEInterface"><code class="docutils literal notranslate"><span class="pre">GearedPIPEInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../interface/ulpi.html">ULPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIInterface"><code class="docutils literal notranslate"><span class="pre">ULPIInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRegisterWindow"><code class="docutils literal notranslate"><span class="pre">ULPIRegisterWindow</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRxEventDecoder"><code class="docutils literal notranslate"><span class="pre">ULPIRxEventDecoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIControlTranslator"><code class="docutils literal notranslate"><span class="pre">ULPIControlTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPITransmitTranslator"><code class="docutils literal notranslate"><span class="pre">ULPITransmitTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/ulpi.html#sol_usb.gateware.interface.ulpi.UTMITranslator"><code class="docutils literal notranslate"><span class="pre">UTMITranslator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../interface/utmi.html">UTMI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIOperatingMode"><code class="docutils literal notranslate"><span class="pre">UTMIOperatingMode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITerminationSelect"><code class="docutils literal notranslate"><span class="pre">UTMITerminationSelect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITransmitInterface"><code class="docutils literal notranslate"><span class="pre">UTMITransmitInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterfaceMultiplexer"><code class="docutils literal notranslate"><span class="pre">UTMIInterfaceMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterface"><code class="docutils literal notranslate"><span class="pre">UTMIInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../interface/gateware/index.html">Gateware PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../interface/gateware/phy.html">Gateware PHY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/gateware/receiver.html">Gateware PHY - Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/gateware/transmitter.html">Gateware PHY - Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/gateware/index.html#sol_usb.gateware.interface.gateware_phy.GatewarePHY"><code class="docutils literal notranslate"><span class="pre">GatewarePHY</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../interface/serdes/index.html">SerDes PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/ecp5.html">SerDes PHY - ECP5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/lfps.html">SerDes PHY - LFPS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/xc7.html">SerDes PHY - XC7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.ECP5SerDesPIPE"><code class="docutils literal notranslate"><span class="pre">ECP5SerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTPSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTPSerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTXSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTXSerDesPIPE</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../soc/index.html">SoC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../soc/cpu.html">CPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../soc/event.html">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../soc/memory.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../soc/memory.html#sol_usb.gateware.soc.memory.WishboneRAM"><code class="docutils literal notranslate"><span class="pre">WishboneRAM</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../soc/memory.html#sol_usb.gateware.soc.memory.WishboneROM"><code class="docutils literal notranslate"><span class="pre">WishboneROM</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../soc/peripheral.html">Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../soc/simplesoc.html">SimpleSoC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../soc/uart.html">UART</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../stream/index.html">Stream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.StreamInterface"><code class="docutils literal notranslate"><span class="pre">StreamInterface</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.StreamInterface.stream_eq"><code class="docutils literal notranslate"><span class="pre">StreamInterface.stream_eq()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.StreamInterface.tap"><code class="docutils literal notranslate"><span class="pre">StreamInterface.tap()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../stream/index.html#module-sol_usb.gateware.stream.arbiter">Arbiter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.arbiter.StreamMultiplexer"><code class="docutils literal notranslate"><span class="pre">StreamMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.arbiter.StreamArbiter"><code class="docutils literal notranslate"><span class="pre">StreamArbiter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../stream/index.html#module-sol_usb.gateware.stream.generator">Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.generator.ConstantStreamGenerator"><code class="docutils literal notranslate"><span class="pre">ConstantStreamGenerator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stream/index.html#sol_usb.gateware.stream.generator.StreamSerializer"><code class="docutils literal notranslate"><span class="pre">StreamSerializer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">USB</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../analyzer.html">Analyzer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../analyzer.html#sol_usb.gateware.usb.analyzer.USBAnalyzer"><code class="docutils literal notranslate"><span class="pre">USBAnalyzer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../request.html">Request</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../request.html#module-sol_usb.gateware.usb.request.control">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../request.html#module-sol_usb.gateware.usb.request.interface">Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../request.html#module-sol_usb.gateware.usb.request.standard">Standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../request.html#module-sol_usb.gateware.usb.request.windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../stream.html">Stream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBInStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBInStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBOutStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBOutStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBOutStreamBoundaryDetector"><code class="docutils literal notranslate"><span class="pre">USBOutStreamBoundaryDetector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><code class="docutils literal notranslate"><span class="pre">USBRawSuperSpeedStream</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamArbiter"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamArbiter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamInterface"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../usb2/index.html">USB2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../usb2/control.html">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/descriptor.html">Descriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/deserializer.html">Deserializer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/endpoint.html#gateware-endpoint-interfaces">Gateware Endpoint Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/packet.html">Packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/request.html">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/reset.html">Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/transfer.html">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/interfaces.html">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#conceptual-components">Conceptual Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#token-detector">Token Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#handshake-detector">Handshake Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#data-packet-receiver">Data Packet Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#device-state-manager">Device State Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#handshake-generator">Handshake Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#data-packet-transmitter">Data Packet Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#data-crc-unit">Data CRC Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#interpacket-timer">Interpacket Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../usb2/index.html#reset-suspend-sequencer">Reset/Suspend Sequencer</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">USB3</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="application.html">Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="link.html">Link</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Physical</a></li>
<li class="toctree-l4"><a class="reference internal" href="protocol.html">Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="request.html">Request</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/custom.html">SOL On Your Own Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/custom.html#high-speed-via-a-ulpi-phy">High-Speed via a ULPI PHY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hardware/custom.html#full-speed-using-fpga-i-o">Full-Speed using FPGA I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#deprecated">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#fixed">Fixed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id1">0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#id2">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#id3">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#id4">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#id5">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id6">0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/shrine-maiden-heavy-industries/sol/">Source Code</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">SOL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Gateware Library</a> &raquo;</li>
        
          <li><a href="../index.html">USB</a> &raquo;</li>
        
          <li><a href="index.html">USB3</a> &raquo;</li>
        
      <li>Physical</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/shrine-maiden-heavy-industries/sol/blob/main/docs/gateware/usb/usb3/physical.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="module-sol_usb.gateware.usb.usb3.physical">
<span id="physical"></span><h1>Physical<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical" title="Permalink to this heading">¶</a></h1>
<p>USB3 Physical-Layer modules</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.USB3PhysicalLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.</span></span><span class="sig-name descname"><span class="pre">USB3PhysicalLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.USB3PhysicalLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstraction encapsulating the USB3 physical layer hardware.</p>
<p>Performs the lowest-level PHY interfacing, including scrambling/descrambling.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>input stream</em>) – Data stream accepted from the Link layer; contains raw data to be transmitted.</p></li>
<li><p><strong>source</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – Data stream generated for transit to the Link layer; contains descrambled data accepted from the SerDes.</p></li>
<li><p><strong>enable_scrambling</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – When asserted, scrambling/descrambling will be enabled.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="module-sol_usb.gateware.usb.usb3.physical.alignment">
<span id="alignment"></span><h2>Alignment<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.alignment" title="Permalink to this heading">¶</a></h2>
<p>Code for USB3 physical-layer encoding.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.alignment.RxWordAligner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.alignment.</span></span><span class="sig-name descname"><span class="pre">RxWordAligner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.alignment.RxWordAligner" title="Permalink to this definition">¶</a></dt>
<dd><p>Receiver word alignment.</p>
<p>Uses the location of COM signals in the data stream to re-position data so that the
relevant commas always fall in the data’s LSB (little endian).</p>
<dl class="py method">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.alignment.RxWordAligner.word_meets_alignment_criteria">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">word_meets_alignment_criteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.alignment.RxWordAligner.word_meets_alignment_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true iff the given data and control appear to be correctly aligned.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.alignment.RxPacketAligner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.alignment.</span></span><span class="sig-name descname"><span class="pre">RxPacketAligner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.alignment.RxPacketAligner" title="Permalink to this definition">¶</a></dt>
<dd><p>Receiver word re-alignment.</p>
<p>Intended to perform a post-descramble (re)-alignment to ensure that we remain aligned to words
even if the other side does not maintain word alignment. Many links will work without this; but
the USB3 specification does not guarantee that word-alignment will always be maintained.</p>
<p>This unit corrects alignment if the link does not maintain this property.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.alignment.RxPacketAligner.word_meets_alignment_criteria">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">word_meets_alignment_criteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctrl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.alignment.RxPacketAligner.word_meets_alignment_criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true iff the given data and control appear to be correctly aligned.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.coding">
<span id="coding"></span><h2>Coding<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.coding" title="Permalink to this heading">¶</a></h2>
<p>Code for USB3 physical-layer encoding.</p>
<dl class="py function">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.K">
<span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">K</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.K" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts K/control codes to bytes</p>
<p>Does not result in 8b10b data; requires explicit encoding.
See the USB3 / PCIe specifications for more information.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.D">
<span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.D" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts D/data codes to bytes.</p>
<p>Does not result in 8b10b data; requires explicit encoding.
See the USB3 / PCIe specifications for more information.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">NamedSymbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple encapsulation of a USB3 symbol, with simple metadata.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol.value_const">
<span class="sig-name descname"><span class="pre">value_const</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol.value_const" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this symbol’s data value as an Torii const.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol.ctrl_const">
<span class="sig-name descname"><span class="pre">ctrl_const</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.NamedSymbol.ctrl_const" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this symbol’s ctrl value as an Torii const.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.get_word_for_symbols">
<span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">get_word_for_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">target_symbols</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.get_word_for_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pair of Torii constants containing the data and ctrl values for the given symbols.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.stream_matches_symbols">
<span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">stream_matches_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">target_symbols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_ready</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.stream_matches_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an Torii conditional that evaluates true when a stream contains the given four symbols.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>The given conditional evaluates to False when <code class="docutils literal notranslate"><span class="pre">stream.valid</span></code> is falsey.</p></li>
<li><p>Assumes the stream is little endian, so the bytes of the stream would read SYM3 SYM2 SYM1 SYM0.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.coding.stream_word_matches_symbol">
<span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.coding.</span></span><span class="sig-name descname"><span class="pre">stream_word_matches_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">word_number</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.coding.stream_word_matches_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an Torii conditional that evaluates true if the given word of a stream matches the given symbol.</p>
</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.ctc">
<span id="ctc"></span><h2>CTC<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.ctc" title="Permalink to this heading">¶</a></h2>
<p>Code for handling SKP ordered sets on the transmit and receive path.</p>
<p>SKP ordered sets are provided in order to give some “padding data” that can be removed
in order to handle differences in transmitter/receiver clock rates – a process called
“clock tolerance compensation” (CTC). The actual insertion and removal of SKP ordered sets
for CTC is handled by the PHY – but it only adds and removes sets where it needs to to
compensate for clock differences.</p>
<p>It’s up to us to insert and remove additional ordered sets.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.ctc.CTCSkipRemover">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.ctc.</span></span><span class="sig-name descname"><span class="pre">CTCSkipRemover</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.ctc.CTCSkipRemover" title="Permalink to this definition">¶</a></dt>
<dd><p>Clock Tolerance Compensation (CTC) receive buffer gateware.</p>
<p>It’s functionally impossible to precisely synchronize the clocks for two independent
systems – every specification has to allow for some difference in frequency between
the system’s clocks (the “clock tolerance”)</p>
<p>To compensate, high speed serial protocols inject ‘filler’ bytes called “SKP ordered sets”,
which can be safely discarded. This allows the slower clock to catch up to the faster one.
[USB 3.2r1: 6.4.3].</p>
<p>Our PHY handles the core clock tolerance compesnation inside of its own clock domain; removing
these filler sets whenever removing them helps to keep the receiver and transmitter’s clocks in sync.
This leaves behind the sets whose removal would not directly help with CTC.</p>
<p>This module removes those leftovers before data leaves the physical layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>input stream</em>) – The stream from which SKP ordered sets should be removed.</p></li>
<li><p><strong>source</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – The relevant stream with SKP ordered sets removed. Note that past this point,
<code class="docutils literal notranslate"><span class="pre">stream.valid</span></code> can and will sometimes be false.</p></li>
<li><p><strong>skip_removed</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Strobe that indicates that a SKP ordered set was removed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.ctc.CTCSkipInserter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.ctc.</span></span><span class="sig-name descname"><span class="pre">CTCSkipInserter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.ctc.CTCSkipInserter" title="Permalink to this definition">¶</a></dt>
<dd><p>Clock Tolerance Compensation (CTC) Skip insertion gateware.</p>
<p>See the <code class="docutils literal notranslate"><span class="pre">CTCSkipRemover</span></code> for a description of CTC and its general operation.</p>
<p>Our PHY handles the core clock tolerance compesnation inside of its own clock domain; adding
Skip sets whenever adding them helps to keep the transmitter’s elastic buffer from running low
on data. However, we still need to add in our own Skip ordered sets so the other side of the link
has enough to perform its own CTC adjustments.</p>
<p>This module adds ordered sets, per the USB standard.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>input stream</em>) – The stream into which SKP ordered sets should be inserted.</p></li>
<li><p><strong>source</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – The relevant stream with SKP ordered sets inserted.</p></li>
<li><p><strong>can_send_skip</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Controls when SKPs can be inserted. This should be asserted when we’re transmitting
logical idle.</p></li>
<li><p><strong>sending_skip</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Indicates that we’re currently sending only SKP characters; and thus our scrambler
should not advance.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.layer">
<span id="layer"></span><h2>Layer<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.layer" title="Permalink to this heading">¶</a></h2>
<p>USB3 physical-layer abstraction.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.layer.USB3PhysicalLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.layer.</span></span><span class="sig-name descname"><span class="pre">USB3PhysicalLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.layer.USB3PhysicalLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstraction encapsulating the USB3 physical layer hardware.</p>
<p>Performs the lowest-level PHY interfacing, including scrambling/descrambling.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>input stream</em>) – Data stream accepted from the Link layer; contains raw data to be transmitted.</p></li>
<li><p><strong>source</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – Data stream generated for transit to the Link layer; contains descrambled data accepted from the SerDes.</p></li>
<li><p><strong>enable_scrambling</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – When asserted, scrambling/descrambling will be enabled.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.lfps">
<span id="lfps"></span><h2>LFPS<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.lfps" title="Permalink to this heading">¶</a></h2>
<p>Low-frequency periodic signaling gateware.</p>
<p>LFPS is the first signaling to happen during the initialization of the USB3.0 link.</p>
<p>LFPS allows partners to exchange Out Of Band (OOB) controls/commands and consists of bursts where
a ‘slow’ clock is generated (between 10M-50MHz) for a specific duration and with a specific repeat
period. After the burst, the transceiver is put in electrical idle mode (same electrical level on
P/N pairs while in nominal mode P/N pairs always have an opposite level):</p>
<p>Transceiver level/mode: _ = 0, - = 1 x = electrical idle
<a href="#id1"><span class="problematic" id="id2">|-_-_-_-xxxxxxxxxxxxxxxxxxxx|</span></a>-_-_-_-xxxxxxxxxxxxxxxxxxxx|…
<a href="#id3"><span class="problematic" id="id4">|&lt;burst&gt;                    |&lt;burst&gt;                    |...
|&lt;-----repeat period-------&gt;|&lt;-----repeat period-------&gt;|</span></a>…</p>
<p>A LFPS pattern is identified by a burst duration and repeat period.</p>
<p>To be able generate and receive LFPS, a transceiver needs to be able put its TX in electrical idle
and to detect RX electrical idle.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.lfps.LFPSTransceiver">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.lfps.</span></span><span class="sig-name descname"><span class="pre">LFPSTransceiver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.lfps.LFPSTransceiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Low-Frequency Periodic Signaling (LFPS) Transciever</p>
<p>Transmits and receives the LPFS sequences required for a USB 3.0 link.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>drive_electrical_idle</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Held high when our PHY should be either in Electrical Idle, or transmit LFPS waveforms.</p></li>
<li><p><strong>send_signaling</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Held high when our PHY should be transmitting LFPS square waves.</p></li>
<li><p><strong>signaling_received</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Should be asserted when our PHY is receiving LFPS square waves.</p></li>
<li><p><strong>send_polling</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Strobe. When asserted, begins Polling LFPS.</p></li>
<li><p><strong>cycles_sent</strong> (<em>Signal</em><em>(</em><em>16</em><em>)</em><em>, </em><em>output</em>) – Incremented every time an LFPS cycle is completed.</p></li>
<li><p><strong>polling_detected</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Strobes high when Polling LFPS is detected.</p></li>
<li><p><strong>reset_detected</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Strobes high when Reset LFPS is detected.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.power">
<span id="power"></span><h2>Power<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.power" title="Permalink to this heading">¶</a></h2>
<p>USB3 physical-layer abstraction.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.power.PHYResetController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.power.</span></span><span class="sig-name descname"><span class="pre">PHYResetController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.power.PHYResetController" title="Permalink to this definition">¶</a></dt>
<dd><p>Gateware responsible for bringing up a PIPE PHY.</p>
<p>Note that this gateware resides in <cite>sync</cite>, rather than one of our
SuperSpeed domains, as the SuperSpeed PHY has yet to bring up its clocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reset</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Signal that drives the PHY’s <code class="docutils literal notranslate"><span class="pre">reset</span></code> signal.</p></li>
<li><p><strong>phy_status</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – The PIPE PHY’s phy_status signal; tracks our progress in startup.</p></li>
<li><p><strong>ready</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Status signal; asserted when the PHY has started up and is ready for use.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>sync_frequency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The frequency of the sync clock domain.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.power.LinkPartnerDetector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.power.</span></span><span class="sig-name descname"><span class="pre">LinkPartnerDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.power.LinkPartnerDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Light abstraction over our PIPE receiver detection mechanism.</p>
<p>Primarily responsible for the power state sequencing necessary during receiver detection.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_detection</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Strobe; requests that a receiver detection will be performed.</p></li>
<li><p><strong>power_state</strong> (<em>Signal</em><em>(</em><em>2</em><em>)</em><em>, </em><em>output</em>) – Controls the PHY’s power state signals.</p></li>
<li><p><strong>detection_control</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Controls the PHY’s partner detection signal.</p></li>
<li><p><strong>phy_status</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Status signal; asserted when the PHY has completed our request.</p></li>
<li><p><strong>rx_status</strong> (<em>Signal</em><em>(</em><em>3</em><em>)</em><em>, </em><em>input</em>) – Status signal; indicates the result of our request.</p></li>
<li><p><strong>new_result</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – Strobe; indicates when a new result is ready on :attr:<code class="docutils literal notranslate"><span class="pre">partner_present</span></code>.</p></li>
<li><p><strong>partner_present</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>output</em>) – High iff a partner was detected during the last detection cycle.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>rx_status</strong> (<em>Array</em><em>(</em><em>Signal</em><em>(</em><em>3</em><em>)</em><em>, </em><em>Signal</em><em>(</em><em>3</em><em>)</em><em>)</em>) – Read-only view of the PHY’s rx_status signal.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-sol_usb.gateware.usb.usb3.physical.scrambling">
<span id="scrambling"></span><h2>Scrambling<a class="headerlink" href="#module-sol_usb.gateware.usb.usb3.physical.scrambling" title="Permalink to this heading">¶</a></h2>
<p>Scrambling and descrambling for USB3.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.scrambling.ScramblerLFSR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.scrambling.</span></span><span class="sig-name descname"><span class="pre">ScramblerLFSR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.scrambling.ScramblerLFSR" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrambler LFSR.</p>
<p>Linear feedback shift register used for USB3 scrambling.
Polynomial: X^16 + X^5 + X^4 + X^3 + 1</p>
<p>See [USB3.2: Appendix B]</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>clear</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Strobe; when high, resets the LFSR to its initial value.</p></li>
<li><p><strong>advance</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Strobe; when high, the LFSR advances on each clock cycle.</p></li>
<li><p><strong>value</strong> (<em>Signal</em><em>(</em><em>32</em><em>)</em><em>, </em><em>output</em>) – The current value of the LFSR.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>initial_value</strong> (<em>32-bit int</em><em>, </em><em>optional</em>) – The initial value for the LFSR. Optional; defaults to all 1’s, per the USB3 spec.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.scrambling.Scrambler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.scrambling.</span></span><span class="sig-name descname"><span class="pre">Scrambler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.scrambling.Scrambler" title="Permalink to this definition">¶</a></dt>
<dd><p>USB3-compliant data scrambler.</p>
<p>Scrambles the transmitted data stream to reduce EMI.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>clear</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – Strobe; when high, resets the scrambler to the start of its sequence.</p></li>
<li><p><strong>enable</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – When high, data scrambling is enabled. When low, data is passed through without scrambling.</p></li>
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – The stream containing data to be scrambled.</p></li>
<li><p><strong>sink</strong> – The stream containing data the scrambled output.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>initial_value</strong> (<em>32-bit int</em><em>, </em><em>optional</em>) – The initial value for the LFSR. Optional.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sol_usb.gateware.usb.usb3.physical.scrambling.Descrambler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sol_usb.gateware.usb.usb3.physical.scrambling.</span></span><span class="sig-name descname"><span class="pre">Descrambler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sol_usb.gateware.usb.usb3.physical.scrambling.Descrambler" title="Permalink to this definition">¶</a></dt>
<dd><p>USB3-compliant data descrambler.</p>
<p>This module descrambles the received data stream. K-codes are not affected.
This module automatically resets itself whenever a COM alignment character is seen.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enable</strong> (<em>Signal</em><em>(</em><em>)</em><em>, </em><em>input</em>) – When high, data scrambling is enabled. When low, data is passed through without scrambling.</p></li>
<li><p><strong>sink</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>input stream</em>) – The stream containing data to be descrambled.</p></li>
<li><p><strong>source</strong> (<a class="reference internal" href="../stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream" title="sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><em>USBRawSuperSpeedStream</em></a><em>(</em><em>)</em><em>, </em><em>output stream</em>) – The stream containing data the descrambled output.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>initial_value</strong> (<em>32-bit int</em><em>, </em><em>optional</em>) – The initial value for the LFSR. Optional.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="protocol.html" class="btn btn-neutral float-right" title="Protocol" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="link.html" class="btn btn-neutral float-left" title="Link" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020 Great Scott Gadgets.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>